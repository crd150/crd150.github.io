<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Professor Noli Brazil" />

<meta name="date" content="2024-01-24" />

<title>Lab 3: Working with the U.S. Census</title>

<script src="site_libs/header-attrs-2.22/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
      .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">CRD 150: Winter 2024</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="syllabus.html">Syllabus</a>
</li>
<li>
  <a href="hw_guidelines.html">Assignment Guidelines</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Labs/Assignments
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="lab1.html">Lab 1</a>
    </li>
    <li>
      <a href="lab2.html">Lab 2</a>
    </li>
    <li>
      <a href="lab3.html">Lab 3</a>
    </li>
    <li>
      <a href="lab4.html">Lab 4</a>
    </li>
    <li>
      <a href="lab5.html">Lab 5</a>
    </li>
    <li>
      <a href="lab6.html">Lab 6</a>
    </li>
    <li>
      <a href="lab7.html">Lab 7</a>
    </li>
    <li>
      <a href="lab8.html">Lab 8</a>
    </li>
    <li>
      <a href="lab9.html">Lab 9</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Other
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="eligible.html">Eligible Communities</a>
    </li>
    <li>
      <a href="tips.html">R tips</a>
    </li>
    <li>
      <a href="ndata.html">Neighborhood Data Sources</a>
    </li>
    <li>
      <a href="bigopendata.html">Big and Open Data Sources</a>
    </li>
    <li>
      <a href="policymap.html">PolicyMap </a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Lab 3: Working with the U.S. Census</h1>
<h3 class="subtitle"><font size="4">CRD 150 - Quantitative Methods in
Community Research</font></h3>
<h4 class="author">Professor Noli Brazil</h4>
<h4 class="date">January 24, 2024</h4>

</div>


<style>
p.comment {
background-color: #DBDBDB;
padding: 10px;
border: 1px solid black;
margin-left: 25px;
border-radius: 5px;
font-style: normal;
}

.figure {
   margin-top: 20px;
   margin-bottom: 20px;
}

h1.title {
  font-weight: bold;
  font-family: Arial;  
}

h2.title {
  font-family: Arial;  
}

</style>
<style type="text/css">
#TOC {
  font-size: 13px;
  font-family: Arial;
}
</style>
<p><br />
</p>
<p>In this guide you will learn how to download, clean and manage United
States Census data using R. You will be working with data on U.S.
counties. The objectives of the guide are as follows.</p>
<ol style="list-style-type: decimal">
<li>Download Census data using their API</li>
<li>Download Census data using PolicyMap</li>
<li>Learn more data wrangling functions</li>
</ol>
<p>This lab guide follows closely and supplements the material presented
in Chapters 4, 8-13 in the textbook <a
href="http://r4ds.had.co.nz/index.html">R for Data Science</a> (RDS) and
the class Handouts 2 and 3.</p>
<p class="comment">
<strong>Assignment 3 is due by 10:00 am, January 31st on
Canvas.</strong> See <a
href="https://crd150.github.io/hw_guidelines.html">here</a> for
assignment guidelines. You must submit an <code>.Rmd</code> file and its
associated <code>.html</code> file. Name the files:
yourLastName_firstInitial_asgn03. For example: brazil_n_asgn03.
</p>
<div style="margin-bottom:25px;">

</div>
<div id="open-up-a-r-markdown-file" class="section level2">
<h2><strong>Open up a R Markdown file</strong></h2>
<p><br />
</p>
<p>Download the <a
href="https://raw.githubusercontent.com/crd150/data/master/labtemplate.Rmd">Lab
template</a> into an appropriate folder on your hard drive (preferably,
a folder named ‘Lab 3’), open it in R Studio, and type and run your code
there. The template is also located on Canvas under Files. Change the
title (“Lab 3”) and insert your name and date. Don’t change anything
else inside the YAML (the stuff at the top in between the
<code>---</code>). Also keep the grey chunk after the YAML. For a
rundown on the use of R Markdown, see the <a
href="https://crd150.github.io/hw_guidelines.html">assignment
guidelines</a></p>
<div style="margin-bottom:25px;">

</div>
</div>
<div id="installing-packages" class="section level2">
<h2><strong>Installing Packages</strong></h2>
<p><br />
</p>
<p>As described in <a
href="https://crd150.github.io/lab2.html#R_Packages">Lab 2</a>, many
functions are part of packages that are not preinstalled into R. In Lab
2, we had to install the package <strong>tidyverse</strong>. In this
lab, you’ll need to install the package <a
href="https://walker-data.com/tidycensus/"><strong>tidycensus</strong></a>,
which contains all the functions needed to download Census data using
the Census API. We’ll also need to install the package
<strong>VIM</strong>, which provides functions for summarizing
missingness in our dataset (a concept covered in Handout 2). Run the
following code to install these packages.</p>
<pre class="r"><code>install.packages(&quot;tidycensus&quot;) 
install.packages(&quot;VIM&quot;)</code></pre>
<p>Run the above code directly in your console, not in your R Markdown.
You only need to install packages once. <a
href="https://www.youtube.com/watch?v=1lXwT7mxmf8">Never more</a>.</p>
<div style="margin-bottom:25px;">

</div>
</div>
<div id="loading-packages" class="section level2">
<h2><strong>Loading Packages</strong></h2>
<p><br />
</p>
<p>Installing a package does not mean its functions are accessible
during a given R session. You’ll need to load packages using the
function <code>library()</code>. Unlike installing, you need to use
<code>library()</code> every time you start an R session, so it should
be in your R Markdown file. A good practice is to load all the packages
you will be using in a given R Markdown at the top of the file. Let’s
load the packages we’ll be using in this lab.</p>
<pre class="r"><code>library(tidyverse)
library(tidycensus)
library(VIM)</code></pre>
<div style="margin-bottom:25px;">

</div>
</div>
<div id="downloading-census-data" class="section level2">
<h2><strong>Downloading Census Data</strong></h2>
<p><br />
</p>
<p>There are two ways to bring Census data into R: Downloading from an
online source and using the Census API.</p>
<div style="margin-bottom:25px;">

</div>
<div id="downloading-from-an-online-source" class="section level3">
<h3><strong>Downloading from an online source</strong></h3>
<p><br />
</p>
<p>The first way to obtain Census data is to download them directly from
the web onto your hard drive. There are several websites where you can
download Census data including <a
href="https://www.socialexplorer.com/">Social Explorer</a>, <a
href="https://www.nhgis.org/">National Historical Geographic Information
System (NHGIS)</a>, and <a
href="https://data.census.gov/cedsci/?intcmp=aff_cedsci_banner">data.census.gov</a>.
The site we’ll use in this lab is <a
href="https://ucdavis.policymap.com/maps">PolicyMap</a>.</p>
<p>UC Davis provides full access to all PolicyMap tools for staff,
students, and faculty. You can access the full site only if you are on
campus or logged onto the UC Davis VPN Client. The following sections
provide step-by-step instructions for downloading data from PolicyMap
and reading it into R. We will be downloading the percent of residents
with a bachelor’s degree in California counties from the 2017-2021
American Community Survey.</p>
<p><br></p>
<ol style="list-style-type: decimal">
<li>Navigate to the UC Davis <a
href="https://ucdavis.policymap.com/maps">PolicyMap portal</a>. You will
need to log in using your UC Davis username and password. You should see
a webpage that looks like the figure below. Note the UC Davis logo on
the top right. Go Aggies!</li>
</ol>
<center>
<p><img
src="pmpage.png" /></p>
</center>
<ol start="2" style="list-style-type: decimal">
<li>You should see a <em>Location</em> search bar somewhere near the top
of the page. Type in “California” in the search bar and <em>California
(State)</em> should pop up as the first selection. Click it.</li>
</ol>
<center>
<p><img
src="typecalifornia.png" /></p>
</center>
<p><br></p>
<p>You should get a map that highlights California’s boundaries. Zoom
into the state.</p>
<center>
<p><img
src="camap1.png" /></p>
</center>
<ol start="3" style="list-style-type: decimal">
<li>The map does not show any data. Let’s add the percent of residents
with a bachelor’s degree in California counties. Click on the
<em>Education</em> tab, followed by <em>Educational Attainment</em> and
then <em>At least a Bachelor’s Degree</em>.</li>
</ol>
<center>
<p><img
src="pbach.png" /></p>
</center>
<p>Now your map should look like the following</p>
<center>
<p><img
src="pbachmap.png" /></p>
</center>
<ol start="4" style="list-style-type: decimal">
<li>Notice in the legend window you can change various aspects of the
variable, including the year</li>
</ol>
<center>
<p><img
src="pmyear2.png" /></p>
</center>
<p>the data type</p>
<center>
<p><img
src="pmdata2.png" /></p>
</center>
<p>and the geographic level.</p>
<center>
<p><img
src="pmgeo2.png" /></p>
</center>
<p>Leave the defaults (Year: 2017-2021, Variable: Percent, and Shaded
by: County, 2020). <em>County, 2020</em> indicates that you want to show
the data by county using 2020 county boundaries.</p>
<ol start="5" style="list-style-type: decimal">
<li><p>Let’s download these data. At the top right of the site, click on
the download icon <img
src="download.png" />.</p></li>
<li><p>A window should pop up. The first screen on the left shows you
what data will be downloaded - it should be “Estimated percent of people
with at least a Bachelor’s degree, between 2017-2021” under Layer, with
“2017-2021” under Year and “Percent” under Variable already
selected.</p></li>
</ol>
<center>
<p><img
src="pmfirst2.png" /></p>
</center>
<ol start="7" style="list-style-type: decimal">
<li>The next section asks you to select a location. It should be
<em>State: California</em> and <em>County, 2020</em> for “Get values for
geography”.</li>
</ol>
<center>
<p><img
src="pmsecond2.png" /></p>
</center>
<ol start="8" style="list-style-type: decimal">
<li>The last section asks you to confirm the download. Select
<em>Machine-readable data file (csv) + data specs file</em> under “Data
Format”. Select <em>Download via browser</em> under “Delivery Method”.
Then click on the Download button.</li>
</ol>
<center>
<p><img
src="pmthird2.png" /></p>
</center>
<ol start="9" style="list-style-type: decimal">
<li>After a minute or two, a screen like below (on a Mac laptop) should
pop up at the top right corner of your screen (the file name will differ
from yours). You can download this file again until the date given.</li>
</ol>
<center>
<p><img
src="downloadcsv2.png" /></p>
</center>
<p>Save the file into an appropriate folder, specifically the folder
that contains your Lab 3 RMarkdown, such as below (Mac laptop)</p>
<center>
<p><img
src="pmfolder.png" /></p>
</center>
<ol start="10" style="list-style-type: decimal">
<li>The file you downloaded is a zip file. You will need to unzip the
file to access its content. To unzip a file on Windows, see <a
href="https://support.microsoft.com/en-us/windows/zip-and-unzip-files-8d28fa72-f2f9-712f-67df-f80cf89fd4e5">here</a>.
On a Mac, see <a
href="https://support.apple.com/guide/mac-help/zip-and-unzip-files-and-folders-on-mac-mchlp2528/mac">here</a>.
When you unzip it there will be two files: the csv file containing the
data and the meta data (or record layout) for the dataset. Let’s bring
the csv dataset file into R. We covered how to read in data into R in <a
href="https://crd150.github.io/lab2.html#Reading_data">Lab 2</a>. Make
sure your <a
href="https://crd150.github.io/lab2.html#Reading_data">working directory
is pointed to the folder containing the file</a>. Then read in the file
using the function <code>read_csv()</code>.</li>
</ol>
<pre class="r"><code>ca.pm &lt;- read_csv(&quot;TYPE THE FILE NAME HERE WITH CSV EXTENSION&quot;)</code></pre>
<p>If you’re having trouble downloading the file from PolicyMap, I
uploaded it onto GitHub. Read it in using the following code.</p>
<pre class="r"><code>ca.pm &lt;- read_csv(&quot;https://raw.githubusercontent.com/crd150/data/master/PolicyMap%20Data%202024-01-22%20224832%20UTC.csv&quot;)</code></pre>
<p>When you bring in a dataset, the first thing you should always do is
view it just to make sure you got what you expected. You can do this
directly in the console by using the function <code>glimpse()</code>,
which we covered in <a
href="https://crd150.github.io/lab2.html#Reading_data">Lab 2</a>.</p>
<pre class="r"><code>glimpse(ca.pm)</code></pre>
<pre><code>## Rows: 58
## Columns: 10
## $ GeoID_Description &lt;chr&gt; &quot;County&quot;, &quot;County&quot;, &quot;County&quot;, &quot;County&quot;, &quot;County&quot;, &quot;C…
## $ GeoID_Name        &lt;chr&gt; &quot;Alameda&quot;, &quot;Alpine&quot;, &quot;Amador&quot;, &quot;Butte&quot;, &quot;Calaveras&quot;,…
## $ SitsinState       &lt;chr&gt; &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;…
## $ GeoID             &lt;chr&gt; &quot;06001&quot;, &quot;06003&quot;, &quot;06005&quot;, &quot;06007&quot;, &quot;06009&quot;, &quot;06011&quot;…
## $ GeoID_Formatted   &lt;chr&gt; &quot;=\&quot;06001\&quot;&quot;, &quot;=\&quot;06003\&quot;&quot;, &quot;=\&quot;06005\&quot;&quot;, &quot;=\&quot;06007\…
## $ pbachp            &lt;dbl&gt; 49.64, 39.32, 19.52, 29.76, 19.91, 14.65, 44.06, 16.…
## $ TimeFrame         &lt;chr&gt; &quot;2017-2021&quot;, &quot;2017-2021&quot;, &quot;2017-2021&quot;, &quot;2017-2021&quot;, …
## $ GeoVintage        &lt;dbl&gt; 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2020…
## $ Source            &lt;chr&gt; &quot;Census&quot;, &quot;Census&quot;, &quot;Census&quot;, &quot;Census&quot;, &quot;Census&quot;, &quot;C…
## $ Location          &lt;chr&gt; &quot;California (State)&quot;, &quot;California (State)&quot;, &quot;Califor…</code></pre>
<p><strong>After you’ve downloaded a csv file whether through PolicyMap
or another source, do not open it up in Excel to manipulate or alter the
data in any way. All of your data wrangling should be done in
R</strong></p>
<p><br></p>
<div style="margin-bottom:25px;">

</div>
</div>
<div id="using-the-census-api" class="section level3">
<h3><strong>Using the Census API</strong></h3>
<p><br />
</p>
<p>You can bring data directly into R using the <a
href="https://www.census.gov/data/developers/guidance/api-user-guide.What_is_the_API.html">Census
Application Program Interface (API)</a>. An API allows for direct
requests for data in machine-readable form. That is, rather than having
to navigate to a website using a browser, scroll around to find a
dataset, download that dataset once you find it, save that data onto
your hard drive, and then bring the data into R, you just tell R to
retrieve data directly using one or two lines of code.</p>
<p>In order to directly download data from the Census API, you need a
key. You can sign up for a free key <a
href="http://api.census.gov/data/key_signup.html">here</a>, which you
should have already done before the lab. Type your key in quotes using
the <code>census_api_key()</code> command</p>
<pre class="r"><code>census_api_key(&quot;YOUR API KEY GOES HERE&quot;, install = TRUE)</code></pre>
<p>The parameter <code>install = TRUE</code> tells R to use this API key
in the future so you won’t have to use <code>census_api_key()</code>
again unless you update or re-download R.</p>
<p>The function for downloading American Community Survey (ACS) Census
data is <code>get_acs()</code>. The command for downloading decennial
Census data is <code>get_decennial()</code>. Getting variables using the
Census API requires knowing the variable ID - and there are thousands of
variables (and thus thousands of IDs) across the different Census files.
To rapidly search for variables, use the commands
<code>load_variables()</code> and <code>View()</code>. Because we’ll be
using the ACS in this guide, let’s check the variables in the 2017-2021
5-year ACS using the following commands.</p>
<pre class="r"><code>v20 &lt;- load_variables(2021, &quot;acs5&quot;, cache = TRUE)
View(v20)</code></pre>
<p>A window should have popped up showing you a record layout of the
2017-2021 ACS. To search for specific data, select “Filter” located at
the top left of this window and use the search boxes that pop up. For
example, type in “Hispanic” in the box under “Label”. You should see
near the top of the list the first set of variables we’ll want to
download - race/ethnicity.</p>
<p>Another way of finding variable names is to search them using <a
href="https://www.socialexplorer.com/data/metadata/">Social
Explorer</a>. Click on the appropriate survey data year and then
“American Community Survey Tables”, which will take you to a list of
variables with their Census IDs.</p>
<p>Let’s extract race/ethnicity data and total population for California
counties using the <code>get_acs()</code> command</p>
<pre class="r"><code>ca &lt;- get_acs(geography = &quot;county&quot;, 
              year = 2021,
              variables = c(tpopr = &quot;B03002_001&quot;, 
                            nhwhite = &quot;B03002_003&quot;, nhblk = &quot;B03002_004&quot;, 
                            nhasn = &quot;B03002_006&quot;, hisp = &quot;B03002_012&quot;), 
              state = &quot;CA&quot;,
              survey = &quot;acs5&quot;,
              output = &quot;wide&quot;)</code></pre>
<p>In the above code, we specified the following arguments</p>
<ul>
<li><code>geography</code>: The level of geography we want the data in;
in our case, the county. Other geographic options can be found <a
href="https://walkerke.github.io/tidycensus/articles/basic-usage.html#geography-in-tidycensus">here</a>.
For many geographies, tidycensus supports more granular requests that
are subsetted by state or even by county, if supported by the API. This
information is found in the “Available by” column in the guide linked
above. If a geographic subset is in bold, it is required; if not, it is
optional. For example, if you supply <code>county = "Yolo"</code> to the
above code, you will get data just for Yolo county. Note that you need
to supply the <code>state</code> argument in order to get a specific
county.</li>
<li><code>year</code>: The end year of the data (because we want
2017-2021, we use 2021).</li>
<li><code>variables</code>: The variables we want to bring in as
specified in a vector you create using the function <code>c()</code>.
Note that we created variable names of our own (e.g. “nhwhite”) and we
put the ACS IDs in quotes (“B03002_003”). Had we not done this, the
variable names will come in as they are named in the ACS, which are not
very descriptive.</li>
<li><code>state</code>: We can filter the counties to those in a
specific state. Here it is “CA” for California. If we don’t specify
this, we get all counties in the United States.</li>
<li><code>survey</code>: The specific Census survey were extracting data
from. We want data from the 5-year American Community Survey, so we
specify “acs5”. The ACS comes in 1- and 5-year varieties.<br />
</li>
<li><code>output</code>: The argument tells R to return a wide dataset
as opposed to a long dataset (we covered long vs. wide data in Handout
2)</li>
</ul>
<p>Another useful option to set is <code>cache_table = TRUE</code>, so
you don’t have to re-download after you’ve downloaded successfully the
first time. Type in <code>? get_acs()</code> to see the full list of
options.</p>
<p><strong>Note that we gathered 2017-2021 ACS data from both Policy Map
and the Census API. Boundaries changed in 2020, which means that the
2017-2021 data will not completely merge with ACS data between 2010 and
2019. So make sure you merge 2020 data only with 2020 data (but you can
merge 2019 data with data between 2010-2019). This is especially
important for tract data, with many new tracts created in 2020 and
existing tracts experiencing dramatic changes in their boundaries
between 2010 and 2020.</strong></p>
<p>What does our data set look like? Take a <code>glimpse()</code>.</p>
<pre class="r"><code>glimpse(ca)</code></pre>
<pre><code>## Rows: 58
## Columns: 12
## $ GEOID    &lt;chr&gt; &quot;06001&quot;, &quot;06003&quot;, &quot;06005&quot;, &quot;06007&quot;, &quot;06009&quot;, &quot;06011&quot;, &quot;06013&quot;…
## $ NAME     &lt;chr&gt; &quot;Alameda County, California&quot;, &quot;Alpine County, California&quot;, &quot;A…
## $ tpoprE   &lt;dbl&gt; 1673133, 1344, 40095, 217884, 45349, 21780, 1161643, 27655, 1…
## $ tpoprM   &lt;dbl&gt; NA, 228, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
## $ nhwhiteE &lt;dbl&gt; 499730, 730, 30081, 153153, 35925, 7398, 483519, 16617, 14536…
## $ nhwhiteM &lt;dbl&gt; 988, 153, 412, 300, 129, 3, 1519, 283, 461, 677, 69, 604, 171…
## $ nhblkE   &lt;dbl&gt; 166017, 8, 930, 3897, 439, 293, 96256, 799, 1492, 42525, 117,…
## $ nhblkM   &lt;dbl&gt; 1837, 19, 113, 316, 164, 64, 1554, 138, 213, 1301, 58, 210, 2…
## $ nhasnE   &lt;dbl&gt; 524980, 10, 429, 10617, 1020, 144, 203875, 810, 9145, 104266,…
## $ nhasnM   &lt;dbl&gt; 2437, 8, 118, 595, 152, 85, 1997, 200, 415, 1215, 172, 348, 2…
## $ hispE    &lt;dbl&gt; 374542, 197, 5966, 37982, 5928, 13177, 304321, 5663, 25362, 5…
## $ hispM    &lt;dbl&gt; NA, 146, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</code></pre>
<p>The tibble contains counties with their estimates for race/ethnicity.
These variables end with the letter “E”. It also contains the <a
href="https://walker-data.com/tidycensus/articles/margins-of-error.html">margins
of error</a> for each estimate. These variables end with the letter “M”.
Although important to evaluate (we covered margins of error in Handout
3), we won’t be using the margins of error much in this class.</p>
<p>Congrats! You’ve just learned how to grab Census data from the Census
API using <strong>tidycensus</strong>. Here’s a badge!</p>
<center>
<p><img
src="tidycensus.png"
style="width:25.0%" /></p>
</center>
<p><br />
</p>
<div style="margin-bottom:25px;">

</div>
</div>
</div>
<div id="data-wrangling" class="section level2">
<h2><strong>Data Wrangling</strong></h2>
<p><br />
</p>
<p>The ultimate goal is to merge the files <em>ca</em> and
<em>ca.pm</em> together. To get there, we have to do a bit of data
wrangling. We covered many data wrangling functions in <a
href="https://crd150.github.io/lab2.html">Lab 2</a>. We will revisit
some of those functions and introduce a few more.</p>
<div style="margin-bottom:25px;">

</div>
<div id="renaming-variables" class="section level3">
<h3><strong>Renaming variables</strong></h3>
<p><br />
</p>
<p>You will likely encounter a variable with a name that is not
descriptive. Or too long. Although you should have a codebook to
crosswalk variable names with descriptions, the more descriptive the
names, the more efficient your analysis will be and the less likely you
are going to make a mistake. Use the command <code>rename()</code> to -
what else? - rename a variable!</p>
<p>First, let’s look at the <em>ca.pm</em>’s column names by using the
function <code>names()</code></p>
<pre class="r"><code>names(ca.pm)</code></pre>
<pre><code>##  [1] &quot;GeoID_Description&quot; &quot;GeoID_Name&quot;        &quot;SitsinState&quot;      
##  [4] &quot;GeoID&quot;             &quot;GeoID_Formatted&quot;   &quot;pbachp&quot;           
##  [7] &quot;TimeFrame&quot;         &quot;GeoVintage&quot;        &quot;Source&quot;           
## [10] &quot;Location&quot;</code></pre>
<p>The variable <em>GeoID_Name</em> contains the county name. Let’s make
the variable name simple and clear. Here, we name it
<em>county</em>.</p>
<pre class="r"><code>ca.pm &lt;- ca.pm %&gt;%
          rename(county = &quot;GeoID_Name&quot;)

names(ca.pm)</code></pre>
<pre><code>##  [1] &quot;GeoID_Description&quot; &quot;county&quot;            &quot;SitsinState&quot;      
##  [4] &quot;GeoID&quot;             &quot;GeoID_Formatted&quot;   &quot;pbachp&quot;           
##  [7] &quot;TimeFrame&quot;         &quot;GeoVintage&quot;        &quot;Source&quot;           
## [10] &quot;Location&quot;</code></pre>
<p>Note the use of quotes around the variable name you are renaming.</p>
<div style="margin-bottom:25px;">

</div>
</div>
<div id="joining-tables" class="section level3">
<h3><strong>Joining tables</strong></h3>
<p><br />
</p>
<p>Our next goal is to merge together the datasets <em>ca.pm</em> and
<em>ca</em>. Handout 2 (pg. 8 and Figure 6) describes the process of
merging datasets. Remember from Handout 3 that the unique Census ID for
a county combines the county ID with the state ID. We have this ID as
the single variable <em>GEOID</em> in <em>ca</em> and <em>GeoID</em> in
<em>ca.pm</em></p>
<center>
<p><img
src="mergefips.png" /></p>
</center>
<p>To merge the two datasets together, use the function
<code>left_join()</code>, which matches pairs of observations whenever
their keys or IDs are equal. We match on the variables <em>GEOID</em>
and <em>GeoID</em> and save the merged data set into a new object called
<em>cacounty</em>.</p>
<pre class="r"><code>cacounty &lt;- left_join(ca, ca.pm, by = c(&quot;GEOID&quot; = &quot;GeoID&quot;))</code></pre>
<p>We want to merge <em>ca.pm</em> into <em>ca</em>, so that’s why the
sequence is <code>ca, ca.pm</code>. The argument <em>by</em> tells R
which variables to match rows on, in this case <em>GEOID</em> in
<em>ca</em> and <em>GeoID</em> in <em>ca.pm</em>. Note that if both data
objects had the same merging ID, then you can just indicate that ID name
once. For example, if the ID in <em>ca.pm</em> and <em>ca</em> was named
<em>GEOID</em>, then the merging code will look like
<code>left_join(ca, ca.pm, by = "GEOID")</code>.</p>
<p>The number of columns in <em>cacounty</em> equals the number of
columns in <em>ca</em> plus the number of columns in <em>ca.pm</em>
minus the ID variable you merged on. Check <em>cacounty</em> to make
sure the merge went as you expected.</p>
<pre class="r"><code>glimpse(cacounty)</code></pre>
<pre><code>## Rows: 58
## Columns: 21
## $ GEOID             &lt;chr&gt; &quot;06001&quot;, &quot;06003&quot;, &quot;06005&quot;, &quot;06007&quot;, &quot;06009&quot;, &quot;06011&quot;…
## $ NAME              &lt;chr&gt; &quot;Alameda County, California&quot;, &quot;Alpine County, Califo…
## $ tpoprE            &lt;dbl&gt; 1673133, 1344, 40095, 217884, 45349, 21780, 1161643,…
## $ tpoprM            &lt;dbl&gt; NA, 228, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
## $ nhwhiteE          &lt;dbl&gt; 499730, 730, 30081, 153153, 35925, 7398, 483519, 166…
## $ nhwhiteM          &lt;dbl&gt; 988, 153, 412, 300, 129, 3, 1519, 283, 461, 677, 69,…
## $ nhblkE            &lt;dbl&gt; 166017, 8, 930, 3897, 439, 293, 96256, 799, 1492, 42…
## $ nhblkM            &lt;dbl&gt; 1837, 19, 113, 316, 164, 64, 1554, 138, 213, 1301, 5…
## $ nhasnE            &lt;dbl&gt; 524980, 10, 429, 10617, 1020, 144, 203875, 810, 9145…
## $ nhasnM            &lt;dbl&gt; 2437, 8, 118, 595, 152, 85, 1997, 200, 415, 1215, 17…
## $ hispE             &lt;dbl&gt; 374542, 197, 5966, 37982, 5928, 13177, 304321, 5663,…
## $ hispM             &lt;dbl&gt; NA, 146, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
## $ GeoID_Description &lt;chr&gt; &quot;County&quot;, &quot;County&quot;, &quot;County&quot;, &quot;County&quot;, &quot;County&quot;, &quot;C…
## $ county            &lt;chr&gt; &quot;Alameda&quot;, &quot;Alpine&quot;, &quot;Amador&quot;, &quot;Butte&quot;, &quot;Calaveras&quot;,…
## $ SitsinState       &lt;chr&gt; &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;, &quot;CA&quot;…
## $ GeoID_Formatted   &lt;chr&gt; &quot;=\&quot;06001\&quot;&quot;, &quot;=\&quot;06003\&quot;&quot;, &quot;=\&quot;06005\&quot;&quot;, &quot;=\&quot;06007\…
## $ pbachp            &lt;dbl&gt; 49.64, 39.32, 19.52, 29.76, 19.91, 14.65, 44.06, 16.…
## $ TimeFrame         &lt;chr&gt; &quot;2017-2021&quot;, &quot;2017-2021&quot;, &quot;2017-2021&quot;, &quot;2017-2021&quot;, …
## $ GeoVintage        &lt;dbl&gt; 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2020…
## $ Source            &lt;chr&gt; &quot;Census&quot;, &quot;Census&quot;, &quot;Census&quot;, &quot;Census&quot;, &quot;Census&quot;, &quot;C…
## $ Location          &lt;chr&gt; &quot;California (State)&quot;, &quot;California (State)&quot;, &quot;Califor…</code></pre>
<p>Note that if you have two variables with the same name in both files,
R will attach a <em>.x</em> to the variable name in <em>ca</em> and a
<em>.y</em> to the variable name in <em>ca.pm</em>. For example, if you
have a variable named <em>Jenny</em> in both files, <em>cacounty</em>
will contain both variables and name it <em>Jenny.x</em> (the variable
in <em>ca</em>) and <em>Jenny.y</em> (the variable in <em>ca.pm</em>).
Fortunately, this is not the case here, but in the future try to avoid
having variables with the same names in the two files you want to
merge.</p>
<p>There are other types of joins, which you can read more about in
Chapter 13 of RDS.</p>
<div style="margin-bottom:25px;">

</div>
</div>
<div id="creating-new-variables" class="section level3">
<h3><strong>Creating new variables</strong></h3>
<p><br />
</p>
<p>As we covered in <a
href="https://crd150.github.io/lab2.html#Creating_new_variables">Lab
2</a>, we use the function <code>mutate()</code> to create new variables
in a data frame. Here, we need to calculate the percentage of residents
by race/ethnicity. The race/ethnicity counts end with the letter “E”.
Remember, we want variable names that are short and clear.</p>
<pre class="r"><code>cacounty &lt;- cacounty %&gt;%
                    mutate(pwhite = 100*(nhwhiteE/tpoprE), 
                           pblack = 100*(nhblkE/tpoprE), 
                           pasian = 100*(nhasnE/tpoprE), 
                           phisp = 100*(hispE/tpoprE))</code></pre>
<p>We multiply each race/ethnic proportion by 100 to convert the values
into percentages. Make sure to look at the data to see if the changes
were appropriately implemented.</p>
<div style="margin-bottom:25px;">

</div>
</div>
<div id="selecting-variables" class="section level3">
<h3><strong>Selecting variables</strong></h3>
<p><br />
</p>
<p>As we covered in <a
href="https://crd150.github.io/lab2.html#Selecting_variables">Lab 2</a>,
we use the function <code>select()</code> to keep or discard variables
from a data frame. Let’s keep the ID variable <em>GEOID</em>, the name
of the county <em>county</em>, total population <em>tpoprE</em>, percent
college graduates <em>pbachp</em>, and all the percent race/ethnicity
variables. Save the changes back into <em>caccounty</em>.</p>
<pre class="r"><code>cacounty &lt;- cacounty %&gt;%
              select(GEOID, county, tpoprE, pbachp, pwhite, pblack, pasian, phisp)</code></pre>
<p>To verify we got it right, check <em>cacounty</em>’s column names</p>
<pre class="r"><code>names(cacounty)</code></pre>
<pre><code>## [1] &quot;GEOID&quot;  &quot;county&quot; &quot;tpoprE&quot; &quot;pbachp&quot; &quot;pwhite&quot; &quot;pblack&quot; &quot;pasian&quot; &quot;phisp&quot;</code></pre>
<p>There are many other <em>tidyverse</em> data wrangling functions that
we have not covered. To learn about them and for a succinct summary of
the functions we have covered in the last two labs, check out RStudio’s
Data Wrangling <a
href="https://rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">cheat
sheet</a>.</p>
<p>Remember to use the pipe <code>%&gt;%</code> function whenever
possible. We didn’t do it above because new functions were being
introduced, but see if you could find a way to combine some or most of
the functions above into a single line of piped code.</p>
<div style="margin-bottom:25px;">

</div>
</div>
<div id="missing-data" class="section level3">
<h3><strong>Missing data</strong></h3>
<p><br />
</p>
<p>A special value used across all data types is <code>NA</code>. The
value <code>NA</code> indicates a missing value (stands for “Not
Available”). Properly treating missing values is very important. The
first question to ask when they appear is whether they should be missing
in the first place. Or did you make a mistake when data wrangling? If
so, fix the mistake. If they should be missing, the second question
becomes how to treat them. Can they be ignored? Should the records with
NAs be removed? We briefly covered missing data in Handout 2.</p>
<p>Numerics also use other special values to handle problematic values
after division. R spits out <code>-Inf</code> and <code>Inf</code> when
dividing a negative and positive value by 0, respectively, and
<code>NaN</code> when dividing 0 by 0.</p>
<pre class="r"><code>-1/0</code></pre>
<pre><code>## [1] -Inf</code></pre>
<pre class="r"><code>1/0</code></pre>
<pre><code>## [1] Inf</code></pre>
<pre class="r"><code>0/0</code></pre>
<pre><code>## [1] NaN</code></pre>
<p>You will likely encounter <code>NA</code>, <code>Inf</code>, and
<code>NaN</code> values, even in already relatively clean datasets like
those produced by the Census. The first step you should take is to
determine if you have missing values in your dataset. There are two ways
of doing this. First, you can run the function <code>aggr()</code>,
which is in the <strong>VIM</strong> package. Run the
<code>aggr()</code> function as follows</p>
<pre class="r"><code>summary(aggr(ca.pm))</code></pre>
<p><img
src="lab3_files/figure-html/unnamed-chunk-19-1.png" /><!-- --></p>
<pre><code>## 
##  Missings per variable: 
##           Variable Count
##  GeoID_Description     0
##             county     0
##        SitsinState     0
##              GeoID     0
##    GeoID_Formatted     0
##             pbachp     0
##          TimeFrame     0
##         GeoVintage     0
##             Source     0
##           Location     0
## 
##  Missings in combinations of variables: 
##         Combinations Count Percent
##  0:0:0:0:0:0:0:0:0:0    58     100</code></pre>
<p>The results show two tables and two plots. The left-hand side plot
shows the proportion of cases that are missing values for each variable
in the data set. The right-hand side plot shows which combinations of
variables are missing. The first table shows the number of cases that
are missing values for each variable in the data set. The second table
shows the percent of cases missing values based on combinations of
variables. The results show that we have no missing values. Hooray!</p>
<p>We can also check missingness using the <code>summary()</code>
function.</p>
<pre class="r"><code>summary(cacounty)</code></pre>
<pre><code>##     GEOID              county              tpoprE             pbachp     
##  Length:58          Length:58          Min.   :    1344   Min.   :11.77  
##  Class :character   Class :character   1st Qu.:   47822   1st Qu.:18.82  
##  Mode  :character   Mode  :character   Median :  186252   Median :24.55  
##                                        Mean   :  680265   Mean   :28.55  
##                                        3rd Qu.:  709576   3rd Qu.:36.96  
##                                        Max.   :10019635   Max.   :60.15  
##      pwhite           pblack             pasian           phisp       
##  Min.   : 9.725   Min.   : 0.02257   Min.   : 0.000   Min.   : 7.548  
##  1st Qu.:33.425   1st Qu.: 1.09291   1st Qu.: 1.874   1st Qu.:15.213  
##  Median :50.524   Median : 1.88018   Median : 4.618   Median :26.294  
##  Mean   :52.147   Mean   : 2.92163   Mean   : 7.578   Mean   :31.449  
##  3rd Qu.:70.138   3rd Qu.: 3.26041   3rd Qu.: 8.225   3rd Qu.:45.605  
##  Max.   :87.431   Max.   :13.14661   Max.   :37.935   Max.   :85.097</code></pre>
<p>The summary provides the minimum, 25th percentile, median, mean, 75th
percentile and maximum for each numeric variable (we’ll get to what
these statistics represent next lab). It will also indicate the number
of observations missing values for each variable, which is none in our
case.</p>
<p>We were fortunate to have no missing data. However, in many
situations, missing data will be present. Check the PolicyMap guide
located <a href="https://crd150.github.io/policymap.html">here</a> to
see how to deal with missingness in PolicyMap data. We’ll also cover
more about what to do with missing data when conducting exploratory data
analysis in Lab 4.</p>
<div style="margin-bottom:25px;">

</div>
</div>
</div>
<div id="census-tracts" class="section level2">
<h2><strong>Census tracts</strong></h2>
<p><br />
</p>
<p>So far in this lab we’ve been working with county-level data. That
is, the rows or units of observations in our data set represented
counties. In most of the labs and assignments moving forward, we will be
working with neighborhood data, using census tracts to represent
neighborhoods.</p>
<p>Let’s bring in census tract racial/ethnic composition using
<code>get_acs()</code>.</p>
<pre class="r"><code>catracts &lt;- get_acs(geography = &quot;tract&quot;, 
              year = 2021,
              variables = c(tpopr = &quot;B03002_001&quot;, 
                            nhwhite = &quot;B03002_003&quot;, nhblk = &quot;B03002_004&quot;, 
                            nhasn = &quot;B03002_006&quot;, hisp = &quot;B03002_012&quot;), 
              state = &quot;CA&quot;,
              survey = &quot;acs5&quot;,
              output = &quot;wide&quot;)</code></pre>
<p>You’ll find that the code is nearly identical to the code we used to
bring in the county data, except we replace <code>county</code> with
<code>tract</code> for <code>geography =</code>.</p>
<p>If you wanted tracts just in Yolo county, then you specify
<code>county = "Yolo"</code>.</p>
<pre class="r"><code>yolotracts &lt;- get_acs(geography = &quot;tract&quot;, 
              year = 2021,
              variables = c(tpopr = &quot;B03002_001&quot;, 
                            nhwhite = &quot;B03002_003&quot;, nhblk = &quot;B03002_004&quot;, 
                            nhasn = &quot;B03002_006&quot;, hisp = &quot;B03002_012&quot;), 
              state = &quot;CA&quot;,
              county = &quot;Yolo&quot;,
              survey = &quot;acs5&quot;,
              output = &quot;wide&quot;)</code></pre>
<p>Look at the data to see if it contains only Yolo county tracts.</p>
<p>We’ll work with tract data more in the next lab when we explore
methods and techniques in exploratory data analysis.</p>
<p>For more information on the <strong>tidycensus</strong> package,
check out Kyle Walker’s excellent book <a
href="https://walker-data.com/census-r/an-introduction-to-tidycensus.html">Analyzing
US Census Data</a>.</p>
<hr />
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png" /></a><br />This
work is licensed under a
<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative
Commons Attribution-NonCommercial 4.0 International License</a>.</p>
<p>Website created and maintained by <a
href="https://nbrazil.faculty.ucdavis.edu/">Noli Brazil</a></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>


</body>
</html>
